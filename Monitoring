Why Monitoring requires

- If server's down logs deleted automatically.
- if big environment difficulty to check logs in all server's manually
- Attacker's are smart whatever they want to do they did and  they will remove to logs
- If we will keep old logs in server we need big machine or machine will slow

A server can contain a lot of log files, from system logs to the application logs.
During debugging, it is important to have log files at hand.
This means in the default case, you need to give access to the server to an individual who wants to debug and that's not possible or a good approach

- Prometheus is designed for reliability, to be the system you o to during an outage to allow you to quickly diagnose problems.
- Each Prometheus server is standalone, not depending on network storage or other remote services.

- Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored.
- Create, explore, and share dashboards with your team and foster a data driven culture


What is prometeus

is an open source toolkit for monitoring and alerting for hardware lavel as well as software, It is writen in go language but understand all languages using client libraries

Promethus contains Three Components
- Data Retival Worker 
  - this data retrival worker receives data from the target resources in form of HTTP Endpoint and if the Endpoint in not available the we use a exporter to fetch data or matrix from the target resource and convert to the http endpoint so that retrival worker can understand the the matric  

- TSDB (Time Series database) 
  - It stores the matrics received from the data retrival worker and send it to http server for client usses or showcase (display) the matrics to the user

- HTTP derver or Web Server Or API server 
  - It displays the matrics in human redable format so the the user can understand the data or matrics comming from the servers in grapical ways


Targeted Resources
- Servers of Linux or Windos - cpu status /memory /disk usages
- Services - excetions
- Applications
- Apache servers  - http request count / duration


Push Gateways
 - it collects data or matrics from the short lived jobs like - update, installation, patching works, backup etc which works for short period of time and export is not able to collect data from these so push gateways helps in doing this by collecting and storing matrics of these short lived jobs and send it to exporter whenever required
  
Prometheus Yaml 
- we describe components and parameters this file for configuring prometheus to collect required data from the software eg. Kubernetes Cluster and the Harware eg ec2 machine where cluster is deployed


global :
scrape_interval: 15s
evaluation interval: 15s
rule files:
" rules. yml "
scrape_configs :
- job_name:
"prometheus"
static_configs :
- targets: ["localhost:8080"]

- Alert manager (http server or api server push alert to alert manager)
  - email
  - notification

- Visulaisation
  - web ui is given by default with prometheus for query using promql Query language
  - Grafana gives beter ui for end users to visulaize the monitoring matrics
  
  ![Prometheus](<Screenshot 2024-11-26 153511.png>)
